# 对现阶段的姿态识别进度做了了解，开始研究目前所采用的算法OpenPose。

## 该论文面向的是识别场景中多个人的任务

- 但是我们的工作是在场景中识别一个人，并且将其骨骼节点标记出来，所以在这里，我觉得该论文不适合我们的项目

为做到识别场景中多个人的任务，使用bottom-up的策略。这种策略通过先找到关键点，之后通过greedy bottom-up parsing step连线

- 现有的一些方法都使用top-down策略，即：首先先使用人分类器将人类分离出来，然后再使用单个人的pose estimator识别出来该人的骨骼节点
  - 这种策略实现识别场景中多个人的问题
    - 人数不定，姿态不定
    - 互相之间的肢体交互与重合
    - 人数与算法执行时间成比例
    - 抓取人体失败，后期无法继续。鲁棒性差
  - 得承认分析人多的问题时bottom-up策略更好

bottom-up策略的优势之一是：可以得到在同一张图片中人们的姿势之间的某种互相关关系（虽然本论文没有好好利用这一点做出一些有趣的应用）。

- 有趣的应用是：使用无人机采集数据，并且检测哪些人有着暴力倾向（因为暴力可被定义为一种相关的描述，只有施加暴力和忍受暴力这一对人的存在才可以定义暴力）
  - 这个应用[eye in the sky](https://arxiv.org/pdf/1806.00746.pdf)已经实现了，抽时间__拜读一下__

bottom-up策略的优势之二是：人越多，鲁棒性越强、越节省时间。

bottom-up策略的劣势之一是：我认为该策略没有对于时间序列上的分析。

- 解释：项目最终需要的成果是：给定一个人的走路视频，根据该视频断定这个人是否有问题
- 这样的话，我需要提出一个问题：分析视频中的骨骼节点是否可以简化为将视频拆分成图像，将每张图像分析骨骼节点之后再合成为视频？
- 我觉得不可以
- 这样做会使得帧与帧之间的相关性严重丢失，损失的是时间序列上的信息。所以，为了项目能识别出更多的病人信息，我认为不能仅仅局限于将视频分析简化为图像分析
- 将骨骼节点的位置提取出来之后，可能需要NLP相关的时间序列预测模型来挖掘出该病人的一些独特信息
- __如果不想做成监督学习的话__

bottom-up策略的劣势之二是：全局parsing是一个NP难问题，并没有比top-down策略更有效率。该文章通过greedy inference解决了这一问题。

## 该论文的创新之处

引入Part Affinity Maps，实现：

- 已知各个节点的名称和位置，如何在不知道人数的状态下进行骨骼图的构建（连线）
- 相比于以往的解决bottom-up方法的复杂度，该算法计算量较少

但是，相比于top-down中对骨骼图的构建来说，还是太过复杂。

## 总结

我认为这个方法不适合于在该项目中使用。

该项目的特点在于：

1. 神经网络输入的是单一人体的视频录像
2. 视频中人的动作行为是从一个点走到另一个点再折返过来
3. 目前，仅有侧面视角
4. 着重于实时性

仅仅是第一个特点和第四个特点就足以说明这篇论文的方法不适用。

# 针对对OpenPose的怀疑，寻找其他方法：人体提取+骨骼节点绘制，top-down

## 新的训练骨骼节点检测的开源数据集

[AI Challenger : A Large-scale Dataset for Going Deeper in Image Understanding ](https://arxiv.org/pdf/1711.06475.pdf)是对该数据集的阐述，其中包括：

- 如何构建数据集
- 各个数据集的baseline model

其中，对于骨骼节点的检测的baseline model使用了：

- 人体检测网络：
  - SSD（Pascal VOC pre-trained）
  - Mask-RCNN（MSCOCO pre-trained）
- 单人关键节点检测
  - DeepLab V2

## 对于top-down方法的分析

Top-down采用了分治算法的哲学思想。若不进行图像分割，检测关键点的计算量将会与图像大小呈指数性的增长。

### 人体检测网络

我们对该网络的要求是（要求强度按序号递减）：

1. 准确性
2. 速度快
3. （待定）

在大数据集上训练出的人体检测网络标签众多，计划将其标签修改成“人体，非人体”，成为一个二分类任务。在将要新建的“非人体”类别中，通过随机抽取其他所有类的实体构成该反例，这样可以使得识别鲁棒性变高。同时，可以通过对整个网络的体系进行改良，减少参数数量，加速截图过程。

或者可以采用一些稳定的方法，例如Haar Cascade + Adaboost（OpenCV中采用的方法）。这种非机器学习的方法是在工业界经过很久时间证明过的，很稳定。可以加入对照组。

病人走路的规则是确定的，在生成第一个识别框之后可以通过哦推测病人接下来可能的位置来自动跟踪病人的下一步位置，不必在每一帧都重新运行人体检测网络，这个方法可大幅度提高检测速度。

目前比较好的人体检测网络的可行架构（目标检测）百花齐放，可深入调研，而不仅仅是局限于论文中提供的baseline model方法。

### 单人关键节点检测

该网络完成的目标是：给定截图良好的人体

- 推测出人体节点位置
- 连接各节点（目前对此步的必要性存疑）

AIChallenger的数据库是为了解决该问题提供的训练数据集。

实现该方法所需的网络架构可抽象成语义分割。目前DeepLab是语义分割领域做的最好的，可对此进行深入研究。

## 对底层的思考

CoordConv可以替代普通卷积使用，该论文太新了，需要尝试。

# 编程工作

在服务器配置好了环境，解决一堆问题，在周二上午开始跑baseline model，预计在周五晚上结束训练。

该baseline model的inference效果是：给定一张图片，输出一张mask。增加一个脚本，可使得inference效果变为：给定一个视频，输出一个mask与视频中对应的帧合成的新视频。